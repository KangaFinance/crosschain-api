{"ast":null,"code":"\"use strict\";\n/**\n * @packageDocumentation\n * @module harmony-contract\n * @hidden\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EventFactory = void 0;\n\nvar utils_1 = require(\"@harmony-js/utils\");\n\nvar event_1 = require(\"./event\");\n\nvar formatter_1 = require(\"../utils/formatter\");\n\nvar encoder_1 = require(\"../utils/encoder\");\n\nvar EventFactory = function () {\n  // constructor\n  function EventFactory(contract) {\n    this.contract = contract;\n    this.abiModel = this.contract.abiModel;\n    this.abiCoder = this.contract.abiCoder;\n    this.eventKeys = this.mapEventKeys();\n  }\n\n  EventFactory.prototype.addEventsToContract = function () {\n    var _this = this;\n\n    this.eventKeys.forEach(function (key) {\n      var newObject = {};\n\n      newObject[key] = function (params) {\n        return new event_1.EventMethod(key, // params,\n        _this.map(_this.abiModel.getEvent(key), _this.contract, params), _this.abiModel.getEvent(key), _this.contract);\n      };\n\n      Object.assign(_this.contract.events, newObject);\n    });\n    return this.contract;\n  };\n  /**\n   * @function mapMethodKeys\n   * @return {string[]} {description}\n   */\n\n\n  EventFactory.prototype.mapEventKeys = function () {\n    return Object.keys(this.abiModel.abi.events);\n  };\n\n  EventFactory.prototype.map = function (abiItemModel, contract, options) {\n    if (!options) {\n      options = {};\n    }\n\n    if (!utils_1.isArray(options.topics)) {\n      options.topics = [];\n    }\n\n    if (typeof options.fromBlock !== 'undefined') {\n      options.fromBlock = formatter_1.inputBlockNumberFormatter(options.fromBlock);\n    } // else if (contract.defaultBlock !== null) {\n    //   options.fromBlock = contract.defaultBlock;\n    // }\n\n\n    if (typeof options.toBlock !== 'undefined') {\n      options.toBlock = formatter_1.inputBlockNumberFormatter(options.toBlock);\n    }\n\n    if (typeof options.filter !== 'undefined') {\n      options.topics = options.topics.concat(encoder_1.eventFilterEncoder(this.abiCoder, abiItemModel, options.filter));\n      delete options.filter;\n    }\n\n    if (!abiItemModel.anonymous) {\n      options.topics.unshift(abiItemModel.signature);\n    }\n\n    if (!options.address) {\n      options.address = contract.address;\n    }\n\n    return options;\n  };\n\n  return EventFactory;\n}();\n\nexports.EventFactory = EventFactory;","map":{"version":3,"sources":["../../src/events/eventFactory.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\n/**\n * @packageDocumentation\n * @module harmony-contract\n * @hidden\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventFactory = void 0;\nvar utils_1 = require(\"@harmony-js/utils\");\nvar event_1 = require(\"./event\");\nvar formatter_1 = require(\"../utils/formatter\");\nvar encoder_1 = require(\"../utils/encoder\");\nvar EventFactory = /** @class */ (function () {\n    // constructor\n    function EventFactory(contract) {\n        this.contract = contract;\n        this.abiModel = this.contract.abiModel;\n        this.abiCoder = this.contract.abiCoder;\n        this.eventKeys = this.mapEventKeys();\n    }\n    EventFactory.prototype.addEventsToContract = function () {\n        var _this = this;\n        this.eventKeys.forEach(function (key) {\n            var newObject = {};\n            newObject[key] = function (params) {\n                return new event_1.EventMethod(key, \n                // params,\n                _this.map(_this.abiModel.getEvent(key), _this.contract, params), _this.abiModel.getEvent(key), _this.contract);\n            };\n            Object.assign(_this.contract.events, newObject);\n        });\n        return this.contract;\n    };\n    /**\n     * @function mapMethodKeys\n     * @return {string[]} {description}\n     */\n    EventFactory.prototype.mapEventKeys = function () {\n        return Object.keys(this.abiModel.abi.events);\n    };\n    EventFactory.prototype.map = function (abiItemModel, contract, options) {\n        if (!options) {\n            options = {};\n        }\n        if (!utils_1.isArray(options.topics)) {\n            options.topics = [];\n        }\n        if (typeof options.fromBlock !== 'undefined') {\n            options.fromBlock = formatter_1.inputBlockNumberFormatter(options.fromBlock);\n        }\n        // else if (contract.defaultBlock !== null) {\n        //   options.fromBlock = contract.defaultBlock;\n        // }\n        if (typeof options.toBlock !== 'undefined') {\n            options.toBlock = formatter_1.inputBlockNumberFormatter(options.toBlock);\n        }\n        if (typeof options.filter !== 'undefined') {\n            options.topics = options.topics.concat(encoder_1.eventFilterEncoder(this.abiCoder, abiItemModel, options.filter));\n            delete options.filter;\n        }\n        if (!abiItemModel.anonymous) {\n            options.topics.unshift(abiItemModel.signature);\n        }\n        if (!options.address) {\n            options.address = contract.address;\n        }\n        return options;\n    };\n    return EventFactory;\n}());\nexports.EventFactory = EventFactory;\n//# sourceMappingURL=eventFactory.js.map"]},"metadata":{},"sourceType":"script"}