{"ast":null,"code":"\"use strict\";\n/**\n * @packageDocumentation\n * @module harmony-contract\n * @hidden\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.eventFilterEncoder = exports.methodEncoder = void 0;\n\nvar utils_1 = require(\"@harmony-js/utils\");\n\nexports.methodEncoder = function (abiCoder, abiItemModel, deployData) {\n  if (abiItemModel.isOfType('receive')) {\n    return undefined;\n  }\n\n  if (abiItemModel.isOfType('fallback')) {\n    return abiItemModel.contractMethodParameters.length ? abiItemModel.contractMethodParameters[0] : undefined;\n  }\n\n  var encodedParameters = abiCoder.encodeParameters(abiItemModel.getInputs(), abiItemModel.contractMethodParameters);\n\n  if (encodedParameters.startsWith('0x')) {\n    encodedParameters = encodedParameters.slice(2);\n  }\n\n  if (abiItemModel.isOfType('constructor')) {\n    if (!deployData) {\n      throw new Error('The contract has no contract data option set. This is necessary to append the constructor parameters.');\n    }\n\n    return deployData + encodedParameters;\n  }\n\n  if (abiItemModel.isOfType('function')) {\n    return abiItemModel.signature + encodedParameters;\n  }\n\n  return encodedParameters;\n};\n\nexports.eventFilterEncoder = function (abiCoder, abiItemModel, filter) {\n  var topics = [];\n  abiItemModel.getIndexedInputs().forEach(function (input) {\n    if (filter[input.name]) {\n      var filterItem = filter[input.name];\n\n      if (utils_1.isArray(filterItem)) {\n        filterItem = filterItem.map(function (item) {\n          return abiCoder.encodeParameter(input.type, item);\n        });\n        topics.push(filterItem);\n        return;\n      }\n\n      topics.push(abiCoder.encodeParameter(input.type, filterItem));\n      return;\n    }\n\n    topics.push(null);\n  });\n  return topics;\n};","map":{"version":3,"sources":["../../src/utils/encoder.ts"],"names":[],"mappings":";AAAA;;;;AAIG;;;;;;;AAEH,IAAA,OAAA,GAAA,OAAA,CAAA,mBAAA,CAAA;;AAIa,OAAA,CAAA,aAAA,GAAgB,UAC3B,QAD2B,EAE3B,YAF2B,EAG3B,UAH2B,EAGT;AAElB,MAAI,YAAY,CAAC,QAAb,CAAsB,SAAtB,CAAJ,EAAsC;AACpC,WAAO,SAAP;AACD;;AACD,MAAI,YAAY,CAAC,QAAb,CAAsB,UAAtB,CAAJ,EAAuC;AACrC,WAAO,YAAY,CAAC,wBAAb,CAAsC,MAAtC,GACH,YAAY,CAAC,wBAAb,CAAsC,CAAtC,CADG,GAEH,SAFJ;AAGD;;AAED,MAAI,iBAAiB,GAAG,QAAQ,CAAC,gBAAT,CACtB,YAAY,CAAC,SAAb,EADsB,EAEtB,YAAY,CAAC,wBAFS,CAAxB;;AAKA,MAAI,iBAAiB,CAAC,UAAlB,CAA6B,IAA7B,CAAJ,EAAwC;AACtC,IAAA,iBAAiB,GAAG,iBAAiB,CAAC,KAAlB,CAAwB,CAAxB,CAApB;AACD;;AAED,MAAI,YAAY,CAAC,QAAb,CAAsB,aAAtB,CAAJ,EAA0C;AACxC,QAAI,CAAC,UAAL,EAAiB;AACf,YAAM,IAAI,KAAJ,CACJ,uGADI,CAAN;AAGD;;AAED,WAAO,UAAU,GAAG,iBAApB;AACD;;AAED,MAAI,YAAY,CAAC,QAAb,CAAsB,UAAtB,CAAJ,EAAuC;AACrC,WAAO,YAAY,CAAC,SAAb,GAAyB,iBAAhC;AACD;;AAED,SAAO,iBAAP;AACD,CAtCY;;AAwCA,OAAA,CAAA,kBAAA,GAAqB,UAChC,QADgC,EAEhC,YAFgC,EAGhC,MAHgC,EAGrB;AAEX,MAAM,MAAM,GAAU,EAAtB;AAEA,EAAA,YAAY,CAAC,gBAAb,GAAgC,OAAhC,CAAwC,UAAC,KAAD,EAAM;AAC5C,QAAI,MAAM,CAAC,KAAK,CAAC,IAAP,CAAV,EAAwB;AACtB,UAAI,UAAU,GAAG,MAAM,CAAC,KAAK,CAAC,IAAP,CAAvB;;AAEA,UAAI,OAAA,CAAA,OAAA,CAAQ,UAAR,CAAJ,EAAyB;AACvB,QAAA,UAAU,GAAG,UAAU,CAAC,GAAX,CAAe,UAAC,IAAD,EAAU;AACpC,iBAAO,QAAQ,CAAC,eAAT,CAAyB,KAAK,CAAC,IAA/B,EAAqC,IAArC,CAAP;AACD,SAFY,CAAb;AAIA,QAAA,MAAM,CAAC,IAAP,CAAY,UAAZ;AAEA;AACD;;AAED,MAAA,MAAM,CAAC,IAAP,CAAY,QAAQ,CAAC,eAAT,CAAyB,KAAK,CAAC,IAA/B,EAAqC,UAArC,CAAZ;AAEA;AACD;;AAED,IAAA,MAAM,CAAC,IAAP,CAAY,IAAZ;AACD,GApBD;AAsBA,SAAO,MAAP;AACD,CA9BY","sourceRoot":"","sourcesContent":["\"use strict\";\n/**\n * @packageDocumentation\n * @module harmony-contract\n * @hidden\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.eventFilterEncoder = exports.methodEncoder = void 0;\nvar utils_1 = require(\"@harmony-js/utils\");\nexports.methodEncoder = function (abiCoder, abiItemModel, deployData) {\n    if (abiItemModel.isOfType('receive')) {\n        return undefined;\n    }\n    if (abiItemModel.isOfType('fallback')) {\n        return abiItemModel.contractMethodParameters.length\n            ? abiItemModel.contractMethodParameters[0]\n            : undefined;\n    }\n    var encodedParameters = abiCoder.encodeParameters(abiItemModel.getInputs(), abiItemModel.contractMethodParameters);\n    if (encodedParameters.startsWith('0x')) {\n        encodedParameters = encodedParameters.slice(2);\n    }\n    if (abiItemModel.isOfType('constructor')) {\n        if (!deployData) {\n            throw new Error('The contract has no contract data option set. This is necessary to append the constructor parameters.');\n        }\n        return deployData + encodedParameters;\n    }\n    if (abiItemModel.isOfType('function')) {\n        return abiItemModel.signature + encodedParameters;\n    }\n    return encodedParameters;\n};\nexports.eventFilterEncoder = function (abiCoder, abiItemModel, filter) {\n    var topics = [];\n    abiItemModel.getIndexedInputs().forEach(function (input) {\n        if (filter[input.name]) {\n            var filterItem = filter[input.name];\n            if (utils_1.isArray(filterItem)) {\n                filterItem = filterItem.map(function (item) {\n                    return abiCoder.encodeParameter(input.type, item);\n                });\n                topics.push(filterItem);\n                return;\n            }\n            topics.push(abiCoder.encodeParameter(input.type, filterItem));\n            return;\n        }\n        topics.push(null);\n    });\n    return topics;\n};\n//# sourceMappingURL=encoder.js.map"]},"metadata":{},"sourceType":"script"}