"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.HmyMethodsDeposit = void 0;
const helpers_1 = require("./helpers");
const utils_1 = require("../utils");
const HmyMethods_1 = require("./HmyMethods");
class HmyMethodsDeposit extends HmyMethods_1.HmyMethods {
    constructor() {
        super(...arguments);
        this.deposit = async (amount, sendTxCallback) => {
            return new Promise(async (resolve, reject) => {
                try {
                    if (this.useOneWallet) {
                        await helpers_1.connectToBrowserWallet(window.onewallet, this.hmy, this.hmyManagerContract.wallet, null, reject);
                    }
                    if (this.useMathWallet) {
                        await helpers_1.connectToBrowserWallet(window.harmony, this.hmy, this.hmyManagerContract.wallet, null, reject);
                    }
                    const response = await this.hmyManagerContract.methods
                        .deposit(utils_1.withDecimals(amount, 18))
                        .send(Object.assign(Object.assign({}, this.options), { value: utils_1.withDecimals(amount, 18) }))
                        .on('transactionHash', sendTxCallback);
                    resolve(response);
                }
                catch (e) {
                    reject(e);
                }
            });
        };
    }
}
exports.HmyMethodsDeposit = HmyMethodsDeposit;
