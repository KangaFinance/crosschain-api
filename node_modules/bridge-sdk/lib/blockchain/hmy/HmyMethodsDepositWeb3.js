"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.HmyMethodsDepositWeb3 = void 0;
const utils_1 = require("../utils");
const HmyMethodsWeb3_1 = require("./HmyMethodsWeb3");
const BN = require('bn.js');
class HmyMethodsDepositWeb3 extends HmyMethodsWeb3_1.HmyMethodsWeb3 {
    constructor() {
        super(...arguments);
        this.deposit = async (amount, sendTxCallback) => {
            let accounts;
            if (this.useMetamask) {
                accounts = await ethereum.enable();
            }
            const res = await this.hmyManagerContract.methods
                .deposit(utils_1.withDecimals(amount, 18))
                .send({
                from: accounts[0],
                gasLimit: process.env.GAS_LIMIT,
                gasPrice: new BN(await this.web3.eth.getGasPrice()).mul(new BN(1)),
                value: utils_1.withDecimals(amount, 18),
            })
                .on('transactionHash', sendTxCallback);
            return res;
        };
    }
}
exports.HmyMethodsDepositWeb3 = HmyMethodsDepositWeb3;
